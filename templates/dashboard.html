{% extends "base.html" %}
{% block content %}
<h1>Production Dashboard</h1>
<div class="cards">
  <div class="card"><div class="card-title">Active Workers</div><div class="card-value">{{ total_workers }}</div></div>
  <div class="card"><div class="card-title">Bundles</div><div class="card-value">{{ bundles_active }}</div></div>
  <div class="card"><div class="card-title">Pieces Today</div><div class="card-value">{{ scans_today }}</div></div>
  <div class="card"><div class="card-title">Earnings Today</div><div class="card-value">${{ '%.2f' % earnings_today }}</div></div>
</div>

<div class="grid-2">
  <section>
    <h2>Recent Activity</h2>
    <table class="table" id="recent-table">
      <thead><tr><th>Time</th><th>Worker</th><th>Bundle</th><th>Op</th><th>Std Min</th></tr></thead>
      <tbody>
        {% for r in recent %}
        <tr>
          <td>{{ r.timestamp }}</td>
          <td>{{ r.worker }}</td>
          <td>{{ r.bundle }}</td>
          <td>{{ r.op_no }}</td>
          <td>{{ r.std_min }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
  <section>
    <h2>Worker Leaderboard (Today)</h2>
    <table class="table">
      <thead><tr><th>Worker</th><th>Pieces</th><th>Std Min</th></tr></thead>
      <tbody>
        {% for r in leaderboard %}
        <tr><td>{{ r.name }}</td><td>{{ r.pieces }}</td><td>{{ r.std_min }}</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
</div>
{% endblock %}
