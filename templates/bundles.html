{% extends "base.html" %}
{% block content %}
<h1>Bundles</h1>

<!-- Flash messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="mt-3">
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<form method="post" class="form-inline mb-3">
  <input name="bundle_code" placeholder="Bundle Code" required>
  <input name="style" placeholder="Style">
  <input name="color" placeholder="Color">
  <input name="size_range" placeholder="Size Range">
  <input name="quantity" type="number" placeholder="Qty">
  <button type="submit">Add Bundle</button>
</form>

<table class="table table-striped table-sm">
  <thead>
    <tr>
      <th>ID</th><th>Code</th><th>Style</th><th>Color</th><th>Size</th><th>Qty</th><th>QR</th>
    </tr>
  </thead>
  <tbody>
    {% for b in bundles %}
    <tr>
      <td>{{ b.id }}</td>
      <td>{{ b.bundle_code }}</td>
      <td>{{ b.style or '' }}</td>
      <td>{{ b.color or '' }}</td>
      <td>{{ b.size_range or '' }}</td>
      <td>{{ b.quantity }}</td>
      <td><img src="{{ url_for('bundle_qr', bid=b.id) }}" width="80"></td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
